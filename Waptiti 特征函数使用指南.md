# Waptiti 特征函数使用指南

#### 1）空行和注释

模板文件在读取时不读取空行和#注释的内容，也就是说在编写模板文件的时候基本上可以沿用python的编程习惯。

#### 2）标准匹配语句的书写

在编写模板文件的过程中，每个匹配语句必须以‘u’、‘b’或者'*'开头。这三个字符对应着“一元问题”，“二元问题”或者两者兼备。模式的其余部分用于对字符串进行观察。%x[off,col]类型的每个标记都将替换为当前位置数据文件中’col‘列中的标记加上偏移量’off‘。

’off‘值前可以加上前缀@，表示其作为从序列开始的绝对位置（off值为真），从序列结束的绝对位置（如果为负）。@1表示第一行数据，@-1表示最后一行数据。

例如：
$$
a1\quad b1\quad c3
\\a2\quad b2\quad c2
\\a3\quad b3\quad c3
\\应用在位置2的模式语句u:\%x[-1,0]/\%x[+1,2]
\\将生成观察u:a1/c3
$$
为了匹配所有位置（所有标价以及所有偏移量）可以使用_x-1或者 _x+2来实现对于序列的向前或者向后扩展。

#### 3）简单匹配语句的书写

Wapiti除了标准匹配语句以外，还支持一种简单化的的模式匹配语句，这是使用以下两种命令来完成的
$$
\\\%m[off,col,"regexp"]
\\\%t[off,col,"regexp"]
$$


这两个命令匹配仍然是使用col和off值去获取数据的，但是该语句会对其应用一个正则表达式然后替换数据。%t表示用True或者False替换数据，这个主要是取决于表达式是否与数据匹配。%m则表示用表达式匹配的子字符去替换原来的数据

#### 4）Wapiti中的正则表达式

Wapiti中实现的正则表达式是经典正则表达式中的一个子集（简单来说就是只实现了部分正则表达式）。但是作者说已经够用了
$$
\\.:匹配任意字符
\\\x : 匹配一个字符集
\\\d : 匹配数字      
\\\a : 匹配希腊字符     
\\\w : 匹配希腊字符和数字
\\\l : 匹配小写
\\\u : 匹配大写
\\\p : 匹配标点
\\\s : 匹配空字符
\\x : 任何可以与自身进行匹配的字符
\\\^: 匹配开头
\\$ : 匹配末尾
\\\* : 匹配任意多次前方表达式
\\? :
$$




