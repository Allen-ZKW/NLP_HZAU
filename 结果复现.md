# 结果复现

## 1. 环境构建

### 下载edirect并安装

edirect下载链接：https://www.ncbi.nlm.nih.gov/books/NBK179288/bin/install-edirect.sh

```shell
source ./install-edirect.sh
sh setup.sh
```

### 创建工作目录

创建一个至少包含三个名为data，script和result的文件夹，该文件夹作为工作目录。将RTO文件保存至data目录下。

### 创建虚拟环境（可选）并安装需要的模块

```shell
conda create -n cosentence
conda activate consentence
conda install --yes --file requirements.txt
wget  https://github.com/explosion/spacy-models/releases/download/en_core_web_sm-3.0.0/en_core_web_sm-3.0.0.tar.gz
```

## 2. 使用edirect下载所需要文献的相关信息

```shell
esearch -db pubmed -query "Oryza sativa"|efilter -pub english|efilter -pub abstract|efetch -format json > edirect_result.json
```

注：在进行下一步前，请确保该文件保存在data目录下

## 3. 运行PMID_abstract.py脚本提取PMID

```
python3 PMID_abstract.py
```

## 4. 调用pubtator下载包含注释的摘要信息

```python
nohup bash ./NCBI3.sh#后台运行下载数据
ps -aux|grep NCBI3.sh#查看运行情况
```

注：在进行下一步前，请确保下载结果保存在data目录下

## 5. 运行co_expression.py脚本提取所有含有TO和GO的语句

```shell
python3 co_expression.py
```

## 6.运行wordcloud.R对所构建的语料库进行处理

这里有2种方法去实现这个R脚本的运行

A. shell脚本嵌套运行

```shell
touch text.sh
```

```shell
#!/bin/bash
/usr/bin/Rscript /tdldata/test.R  
```

```shell
sh test.sh
```

B. 将文件下载到本地，用Rgui或Rstudio执行R脚本

注意：如果输出csv文件在其它目录下，请将它移动到data目录下

## 7. 运行analyse_result.py脚本对上述结果进行分析和可视化

```shell
python3 analyse_result.py
```

结果数据和绘图将会被保存在data目录下

